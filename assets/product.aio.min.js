/*
Generated time: October 16, 2023 12:43
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
function getTotalQuantity(){for(var t=0,e=document.querySelectorAll(".free_product_with_add"),i=0;i<e.length;i++){var r=parseInt(e[i].querySelector(".quantity-selector input").value);1<=r&&e[i].querySelector(".covered_qty_shakes.show")&&(parseInt(e[i].querySelector(".quantity-selector input").value),t=parseInt(t+r))}var n,o,a=document.querySelector(".shakes_flavours_list").getAttribute("data-price")*t;1<=t?(document.querySelector(".discount_message").classList.add("dis"),document.querySelector(".total_amount_of_product .total").innerHTML=formatMoney(a,theme.moneyFormat)):(document.querySelector(".discount_message").classList.remove("dis"),document.querySelector(".total_amount_of_product .total").innerHTML=""),1<=t&&t<=2?(o=document.querySelector(".shakes_input_hidden").getAttribute("data-done"),document.querySelector(".discount_message .discount_value").innerHTML="10%",document.querySelector(".no_gift_block span").style.display="block",document.querySelector(".second_gift_block span").style.display="none",document.querySelector(".third_gift_block span").style.display="none",n=parseInt(10*a)/100,document.querySelector(".total_amount_of_product .amount").innerHTML="(Saving "+formatMoney(n,theme.moneyFormat)+")"):3<=t&&t<=5?(o=document.querySelector(".shakes_input_hidden").getAttribute("data-dtwo"),document.querySelector(".discount_message .discount_value").innerHTML="15%",document.querySelector(".second_gift_block span").style.display="block",document.querySelector(".third_gift_block span").style.display="none",n=parseInt(15*a)/100,document.querySelector(".total_amount_of_product .amount").innerHTML="(Saving "+formatMoney(n,theme.moneyFormat)+")"):6<=t?(o=document.querySelector(".shakes_input_hidden").getAttribute("data-dthree"),document.querySelector(".discount_message .discount_value").innerHTML="20%",document.querySelector(".second_gift_block span").style.display="block",document.querySelector(".third_gift_block span").style.display="block",n=parseInt(20*a)/100,document.querySelector(".total_amount_of_product .amount").innerHTML="(Saving "+formatMoney(n,theme.moneyFormat)+")"):(o=document.querySelector(".shakes_input_hidden").getAttribute("data-price"),document.querySelector(".no_gift_block span").style.display="none",document.querySelector(".second_gift_block span").style.display="none",document.querySelector(".third_gift_block span").style.display="none",document.querySelector(".total_amount_of_product .amount").innerHTML=""),document.querySelector(".shakes_input_hidden").value=o}window.ThemeSection_Product=({product:t,variant:e,featuredMediaID:i,template:r,thumbnailsPosition:n,showThumbnailsOnMobile:o})=>({productRoot:null,product:t,current_variant:e,featured_media_id:i,current_media_id:i,loading:!1,quantity:"1",options:[],optionHandles:[],storeAvailability:null,addedToCart:!1,stickyAddToCartShown:!1,template:r,thumbnailsPosition:n,showThumbnailsOnMobile:o,get addToCartText(){return this.current_variant?this.loading?window.theme.strings.loading:!this.loading&&this.current_variant.available?"product.preorder"===this.template?window.theme.strings.preOrder:window.theme.strings.addToCart:this.loading||this.current_variant.available?void 0:window.theme.strings.soldOut:window.theme.strings.unavailable},get currentVariantId(){return this.current_variant?this.current_variant.id:null},get currentVariantAvailabilityClosestLocation(){var t;return Alpine.store("availability")&&(t=this.currentVariantId,t=Alpine.store("availability").availability[t])?t.closest_location:null},get currentVariantAvailable(){return this.current_variant?this.current_variant.available:null},get currentVariantTitle(){return this.current_variant&&this.current_variant.title&&!this.current_variant.title.includes("Default")?this.current_variant.title:""},get current_price(){return this.current_variant.price},get isUsingSlideshowToDisplayMedia(){var t=this.productRoot.querySelector(".splide--product");return!(!(window.Splide&&this.productRoot&&t&&window.slideshows&&window.slideshows[""+t.id])||window.slideshows[""+t.id].state.is(window.Splide.STATES.DESTROYED))},formatMoney(t){return formatMoney(t,theme.moneyFormat)},init(){this.productRoot=this.$root,this.$refs.productForm&&this.$refs.productForm.addEventListener("submit",this.submitForm.bind(this)),this.getOptions(),this.getAddToCartButtonHeight(),this.$watch("current_media_id",(t,e)=>{o&&this.$root.dispatchEvent(new CustomEvent("shapes:product:mediachange",{bubbles:!0,detail:{media_id:this.current_media_id,slideshow_id:this.productRoot.querySelector(".splide--product")?.id}})),this.isUsingSlideshowToDisplayMedia||(this.$root.querySelector(`[data-product-single-media-wrapper="${e}"]`).dispatchEvent(new CustomEvent("mediaHidden")),this.$root.querySelector(`[data-product-single-media-wrapper="${t}"]`).dispatchEvent(new CustomEvent("mediaVisible")))}),this.updateStoreAvailability(this.current_variant)},getAddToCartButtonHeight(){window.onload=function(){var t=document.querySelector(".add-to-cart-btn").offsetHeight;document.documentElement.style.setProperty("--payment-button-height",t+"px")}},updateStoreAvailability(t){this.$refs.storeAvailabilityContainer&&(this.storeAvailability=this.storeAvailability||new StoreAvailability(this.$refs.storeAvailabilityContainer),this.storeAvailability)&&t&&this.storeAvailability.fetchContent(t)},optionChange(){this.getOptions();var t=ShopifyProduct.getVariantFromOptionArray(this.product,this.options);this.current_variant=t,this.current_variant&&(variantLiveRegion(this.current_variant),this.updateStoreAvailability(this.current_variant),this.current_variant.featured_media&&(this.current_media_id=this.current_variant.featured_media.id),t=ShopifyProductForm.getUrlWithVariant(window.location.href,this.current_variant.id),window.history.replaceState({path:t},"",t),$(".overlay").show(),fetch(this.product.handle+"?variant="+this.current_variant.id,{credentials:"same-origin",method:"GET"}).then(t=>t.text()).then(t=>{t=(new DOMParser).parseFromString(t,"text/html").querySelector(".subscription-box").innerHTML;$(".subscription-box").html(t),$(".overlay").hide()}),this.$refs.singleVariantSelector.dispatchEvent(new Event("change",{bubbles:!0})),this.$root.dispatchEvent(new CustomEvent("shapes:product:variantchange",{bubbles:!0,detail:{variant:this.current_variant}})))},getOptions(){this.options=[],this.optionHandles=[],this.$root.querySelectorAll("[data-single-option-selector]").forEach(t=>{var e;"SELECT"===t.nodeName?(e=t.value,this.options.push(e),this.optionHandles.push(t.options[t.selectedIndex].dataset.handle)):t.checked&&(console,e=t.value,this.options.push(e),this.optionHandles.push(t.dataset.handle))})},changeMedia(t){var e;this.$root.dispatchEvent(new CustomEvent("shapes:product:arrow-change",{bubbles:!0,detail:{direction:t}})),"under"==this.thumbnailsPosition&&(e=this.$root.querySelector(".product-thumbnail-list-item--active"),null!==(t="prev"==t?e.previousElementSibling:e.nextElementSibling))&&t.querySelector(".media-thumbnail").click()},submitForm(t){if(t.preventDefault(),t.submitter.classList.contains("lp_shakes_button")){for(var e,i=document.querySelectorAll(".free_product_with_add"),r=[],t=[],n=[],o=0,a=0;a<i.length;a++){var s,u=parseInt(i[a].querySelector(".quantity-selector input").value);1<=u&&i[a].querySelector(".covered_qty_shakes.show")&&(s=i[a].getAttribute("data-id"),o+=parseInt(i[a].querySelector(".quantity-selector input").value),r.push({id:parseInt(s),quantity:parseInt(u)}))}1<=o&&(e=document.querySelector(".no_gift_block").getAttribute("data-vid"),t.push({id:parseInt(e),quantity:parseInt(1)})),3<=o&&(e=document.querySelector(".second_gift_block").getAttribute("data-vid"),t.push({id:parseInt(e),quantity:parseInt(1)})),6<=o&&(e=document.querySelector(".third_gift_block").getAttribute("data-vid"),t.push({id:parseInt(e),quantity:parseInt(1)})),e=o<1?r:r.concat(t),0==r.length&&(t=document.querySelector(".lp_shakes_button").getAttribute("data-cid"),n.push({id:parseInt(t),quantity:parseInt(u)}),e=n),l=e,function e(i){var t=new FormData;t.append("id",l[i].id),t.append("quantity",l[i].quantity),fetch("/cart/add.js",{method:"POST",body:t}).then(function(t){return t.json()}).then(function(t){++i<l.length&&e(i),document.querySelector(".alert_message_shakes").style.display="block"}).catch(function(t){console.error("Error adding variants to cart:",t)}).finally(()=>{document.querySelector(".lp_shakes_button").classList.contains("added")&&setTimeout(function(){window.location.href="/checkout"},2e3)})}(0)}else{this.loading=!0,liveRegion(window.theme.strings.loading);t=new FormData(this.$refs.productForm);let e="modal"===theme.settings.cart_type;n=fetchConfigDefaults("javascript");e&&(t.append("sections","cart-items,cart-footer,cart-item-count"),t.append("sections_url",window.location.pathname)),n.body=t,n.headers["X-Requested-With"]="XMLHttpRequest",delete n.headers["Content-Type"],fetch(""+theme.routes.cart_add_url,n).then(t=>t.json()).then(t=>{if(t.status)throw this.loading=!1,t.description;this.loading=!1,this.addedToCart=!0,e&&document.body.dispatchEvent(new CustomEvent("shapes:modalcart:afteradditem",{bubbles:!0,detail:{response:t}})),document.querySelector('[data-show-on-add="true"]')||this.$refs.added&&this.$nextTick(()=>this.$refs.added.focus())}).catch(t=>{"string"==typeof t?alert(t):t.json().then(t=>{this.loading=!1,alert(t.description)})})}var l},openZoom(t){var e=this.productRoot.querySelector("[data-photoswipe-images]");e&&(e=JSON.parse(e.innerHTML),e=Object.keys(e).indexOf(t),this.$refs.photoSwipeComponent.dispatchEvent(new CustomEvent("shapes:photoswipe:open",{detail:{index:e}})))}}),window.productThumbnails=()=>({firstVisible:!0,lastVisible:!1,mounted(){var t=this.$refs.firstThumbnail,e=this.$refs.lastThumbnail,i={root:this.$root.querySelector(".splide__track"),rootMargin:"0px",threshold:1},r=new window.IntersectionObserver(([t])=>{t.isIntersecting?this.firstVisible=!0:this.firstVisible=!1},i),i=new window.IntersectionObserver(([t])=>{t.isIntersecting?this.lastVisible=!0:this.lastVisible=!1},i);r.observe(t),i.observe(e)}});for(var shake_add=document.querySelectorAll(".covered_qty_shakes .add_qty_shakes"),i=0;i<shake_add.length;i++)shake_add[i].addEventListener("click",function(){this.parentElement.classList.add("show"),jQuery(".continue_to_checkout_shakes").removeClass("gray-btn"),jQuery(".continue_to_checkout_shakes").html('<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path d="M18 10v-4c0-3.313-2.687-6-6-6s-6 2.687-6 6v4h-3v14h18v-14h-3zm-10 0v-4c0-2.206 1.794-4 4-4s4 1.794 4 4v4h-8z"></path></svg> Checkout'),getTotalQuantity()});var quantityInputs=document.querySelectorAll(".quantity-selector input");function updateQuantity(t){var e=t.target.parentElement.querySelector("input"),i=parseInt(e.value);if(t.target.classList.contains("plus")){if(5<i)return;i++}else t.target.classList.contains("minus")&&(1<i?i--:t.target.parentElement.parentElement.classList.remove("show"));e.value=i.toString(),getTotalQuantity()}for(i=0;i<quantityInputs.length;i++){var minusButton=quantityInputs[i].previousElementSibling,plusButton=quantityInputs[i].nextElementSibling;minusButton.addEventListener("click",updateQuantity),plusButton.addEventListener("click",updateQuantity)}function addToCart(t){}jQuery("body").on("click",".common_gift",function(){}),jQuery("body").on("click",".continue_to_checkout_shakes",function(){var t=!1;jQuery(".inner_flavours_list .free_product_with_add").each(function(){jQuery(this).find(".covered_qty_shakes").hasClass("show")&&(t=!0)}),t?(jQuery(this).removeClass("gray-btn"),jQuery(this).html('<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path d="M18 10v-4c0-3.313-2.687-6-6-6s-6 2.687-6 6v4h-3v14h18v-14h-3zm-10 0v-4c0-2.206 1.794-4 4-4s4 1.794 4 4v4h-8z"></path></svg> Checkout'),jQuery(".lp_shakes_button").trigger("click"),jQuery(".lp_shakes_button").addClass("added")):(jQuery(this).html("Select at least 1 bag"),jQuery(this).addClass("gray-btn"))}),jQuery("body").on("click",".minus",function(){jQuery(this).closest(".quantity-selector").removeClass("gray-disable");var t=!1;jQuery(".inner_flavours_list .free_product_with_add").each(function(){jQuery(this).find(".covered_qty_shakes").hasClass("show")&&(t=!0)}),t||(jQuery(".continue_to_checkout_shakes").html("Select at least 1 bag"),jQuery(".continue_to_checkout_shakes").addClass("gray-btn"))}),jQuery("body").on("click",".quantity-selector button, .add_qty_shakes",function(){var t=0,e=jQuery(".inner_flavours_list .free_product_with_add");jQuery(".inner_flavours_list .free_product_with_add").each(function(){jQuery(this).find(".covered_qty_shakes").hasClass("show")&&(t+=parseInt(jQuery(this).find("[type=number]").val()))}),5<t?e.addClass("max-added"):e.removeClass("max-added")}),jQuery("body").on("click",".plus",function(){6==jQuery(this).prev().val()?jQuery(this).closest(".quantity-selector").addClass("gray-disable"):jQuery(this).closest(".quantity-selector").removeClass("gray-disable")}),0<document.querySelectorAll(".continue_to_checkout_shakes").length&&document.querySelector(".continue_to_checkout_shakes").addEventListener("click",function(){}),0<document.querySelectorAll(".covered_flavours_list .first_current_selected_li").length&&document.querySelector(".covered_flavours_list .first_current_selected_li").addEventListener("click",function(){document.querySelector(".product-block.product-block-title.break-words").scrollIntoView({behavior:"smooth",block:"start"}),document.querySelector(".covered_flavours_list").classList.toggle("active")}),jQuery(document).on("click",function(t){0===jQuery(t.target).closest(".covered_flavours_list").length&&jQuery(".covered_flavours_list").removeClass("active")});