/*
Generated time: October 16, 2023 12:43
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
let productSelectionButtonClicked=!1,productSelectionIndex,selectedProducts=[];document.querySelectorAll(".lsg-bundle-block").forEach(()=>{selectedProducts.push([])});const buildSelectedProductArray=e=>{var t=e.classList.contains("lsg-bundle-product-select-quantity-minus")?"minus":e.classList.contains("lsg-bundle-product-select-quantity-plus")?"plus":"err",l=e.closest(".lsg-bundle-product-select-wrapper");const n=l.getAttribute("data-lsg-bundle-variant-select-id");var a=l.querySelector(".lsg-bundle-product-select-title").innerHTML,u=getBundleBlock(e),s=Array.from(u.parentNode.children).indexOf(u);switch(t){case"minus":1==productSelectionButtonClicked?(selectedProducts[s].splice(productSelectionIndex,1),productSelectionButtonClicked=!1):(productSelectionIndex=selectedProducts[s].findLastIndex(e=>e.selectedVariantId==n),selectedProducts[s].splice(productSelectionIndex,1));break;case"plus":var r=l.querySelector("img").src,c=l.querySelector("img").alt,r={selectedProductImageUrl:r,selectedVariantId:n,selectedProductTitle:a,selectedProductImageAlt:c};selectedProducts[s].push(r)}updateSelectedProductGUI(e)},updateSelectedProductGUI=e=>{e=getBundleBlock(e);const a=Array.from(e.parentNode.children).indexOf(e);0<selectedProducts[a].length?e.classList.add("has-selected-product"):e.classList.remove("has-selected-product"),e.querySelectorAll("[data-bundle-builder-selected-products]").forEach(e=>{e.querySelectorAll("[data-bundle-builder-selected-variant-id]").forEach((e,t)=>{var t=selectedProducts[a][t],l=e.querySelector("[data-bundle-builder-selected-product-image]"),n=e.querySelector("[data-bundle-builder-selected-product-title]");void 0!==t?(e.setAttribute("data-bundle-builder-selected-variant-id",t.selectedVariantId),l.src=t.selectedProductImageUrl,l.alt=t.selectedProductImageAlt,n.innerHTML=t.selectedProductTitle,e.classList.add("active")):(e.setAttribute("data-bundle-builder-selected-variant-id",""),l.src="",l.alt="",n.innerHTML="",e.classList.remove("active"))})})};function setActiveBundle(e){const t=e.dataset.bundleIndex;var l=e.closest(".lsg-bundle-wrapper"),n=l.querySelectorAll(".lsg-bundle-block"),l=l.querySelector('[data-bundle-index="'+t+'"].lsg-bundle-block');l&&(n.forEach(function(e){e.dataset.bundleIndex!=t?e.classList.remove("lsg-bundle-block-active"):e.classList.add("lsg-bundle-block-active")}),updateSelectedProductGUI(e),setUrl(l.querySelector("form")))}function checkParameter(){var e=new URLSearchParams(window.location.search),t=document.querySelectorAll(".lsg-bundle-block"),l=window.location.search,n=e.getAll("bundle");let a=e.getAll("bundle_index");const u=e.getAll("bundle_interval"),s=e.getAll("bundle_interval_frequency");if(0<n.length||e.has("bundle_index")||e.has("bundle_interval")||e.has("bundle_interval_frequency")){a=0<a.length?a[0]:0,isNaN(a)&&(a=0);const r=t[a=t.length<a?0:a];0<a&&document.querySelectorAll(".lsg-bundle-size-select .lsg-bundle-size-select-el")[a].click(),n.forEach(e=>{var e=e.split("_"),t=e[0],l=e[1],n=r.querySelector(`.lsg-bundle-product-select-quantity-input[data-product="${t}"]`);if(null!=n){n.value=parseInt(l,10)-1;var a=n.closest(".lsg-bundle-product-select-quantity-wrap").querySelector(".lsg-bundle-product-select-quantity-plus");for(let e=0;e<l;e++)n.value=e,incrementSubProduct(a),buildSelectedProductArray(a),incrementEnableValidation(a),checkoutEnableValidation(a)}}),u.forEach(e=>{var t=r.querySelector(`.lsg-bundle-interval-select input[name^="bundle_interval_select_"][value="${u}"]`);null!=t&&(t.checked=!0,updateInterval(t),checkoutEnableValidation(t))}),s.forEach(e=>{var t=r.querySelector(".lsg-bundle-interval-frequency-select");null!=t&&(t.value=s,updateFrequency(t))}),history.pushState&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+l,window.history.pushState({path:e},"",e))}}function setUrl(e){var t=e.closest(".lsg-bundle-wrapper");if(t&&!t.hasAttribute("data-lsg-bundle-set-url"))return!1;t=getBundleBlock(e),e=t.querySelectorAll(".lsg-bundle-product-select-quantity-input");let l="?",n="bundle";e.forEach(e=>{var t=e.value;0<t&&(l=(l+="?"==l?"":"&")+`${n}=${e.getAttribute("data-product")}_`+t)});var e=t.closest(".lsg-bundle-wrapper").querySelector(".lsg-bundle-block.lsg-bundle-block-active"),e=(null!=e&&(n="bundle_index",l=(l+="?"==l?"":"&")+n+"="+Array.from(e.parentNode.children).indexOf(e)),t.querySelector('.lsg-bundle-interval-select input[type="radio"]:checked'));null!=e&&(n="bundle_interval",l=(l+="?"==l?"":"&")+n+"="+e.value,"sub"==e.value)&&(n="bundle_interval_frequency",l+="?"==l?"":"&",null!=(e=t.querySelector(".lsg-bundle-interval-frequency-select")))&&(l+=n+"="+e.value),history.pushState&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+l,window.history.pushState({path:t},"",t))}function incrementEnableValidation(e){var t=e.closest(".lsg-bundle-product-set-list"),l=t.querySelectorAll(".lsg-bundle-product-select-quantity-increment");const a=getBundleQuantityByChild(e),u=t.dataset.bundleMax;l.forEach(function(e){var t=e.classList.contains("lsg-bundle-product-select-quantity-minus")?"minus":e.classList.contains("lsg-bundle-product-select-quantity-plus")?"plus":"err",l=e.closest(".lsg-bundle-product-select-quantity-wrap").querySelector(".lsg-bundle-product-select-quantity-input"),n=l.value;switch(t){case"minus":e.disabled=!1,n<=0&&(e.disabled=!0),n<=parseInt(l.min)&&(e.disabled=!0);break;case"plus":e.disabled=!1,n>=parseInt(l.max)&&(e.disabled=!0),0<parseInt(u)&&a>=parseInt(u)&&(e.disabled=!0)}})}function checkoutEnableValidation(e){const a=getBundleBlock(e);var t=a.querySelectorAll("[data-lsg-bundle-atc");const u=getBundleQuantity(e);e=getBundleInterval(e);const s="otp"==e?a.dataset.otpBundleMin:a.dataset.subBundleMin,r="otp"==e?a.dataset.otpBundleMax:a.dataset.subBundleMax,c=s-u;t.forEach(function(e){var t=e.querySelector("[data-lsg-bundle-submit-button-atc-text]"),l=e.querySelector("[data-lsg-bundle-submit-button-add-more-text]"),n=e.querySelector("[data-lsg-bundle-submit-button-add-more-quantity]");u>=s&&(u<=r||r<s)?(e.classList.remove("disabled"),t.classList.remove("hidden"),l.classList.add("hidden"),a.classList.add("bundle-checkout-enabled")):(e.classList.add("disabled"),t.classList.add("hidden"),l.classList.remove("hidden"),n.innerHTML=c,a.classList.remove("bundle-checkout-enabled"))})}function addToCart(e){const t=getGuid();var e=getBundleBlock(e),l=e.querySelector(".lsg-bundle-form"),n=l.querySelector('input[name="id"]').value;const a=l.querySelector('input[name="selling_plan"]').value,u=""==a?"otp":"sub";var l="otp"==u?e.dataset.otpBundleMin:e.dataset.subBundleMin,s="otp"==u?e.dataset.otpBundleMax:e.dataset.subBundleMax,e=e.querySelector(".lsg-bundle-product-set-list").querySelectorAll(".lsg-bundle-product-select-quantity-input");let r={items:[]},c=0;n={id:n,quantity:1,properties:{bundle_id:t,bundle_parent:!0}};if("sub"==u&&(n.selling_plan=a),r.items.push(n),e.forEach(function(e){c+=parseInt(e.value),0<parseInt(e.value)&&(e={id:e.dataset.product,quantity:parseInt(e.value),properties:{bundle_id:t}},"sub"==u&&(e.selling_plan=a),r.items.push(e))}),c>s||c<l)return!1;fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(r),credentials:"same-origin"}).then(e=>{200==e.status&&lsgSlideCartOpen()}).catch(e=>{console.error(e)})}function updateFrequency(e){updateBundlePrice(e),updateSellingPlan(e)}function updateInterval(e){var t=getBundleBlock(e),l=t.querySelector('.lsg-bundle-form input[name="selling_plan"]'),n=t.querySelector(".lsg-bundle-interval-frequency-select:not(.is-duplicate)");switch(e.value){case"otp":t.classList.remove("lsg-bundle--sub-selected"),t.classList.add("lsg-bundle--otp-selected"),l.value="";break;case"sub":t.classList.remove("lsg-bundle--otp-selected"),t.classList.add("lsg-bundle--sub-selected"),l.value=n.value}updateBundlePrice(e),updateSellingPlan(e)}function updateSellingPlan(e){var e=getBundleBlock(e),t=e.querySelector('.lsg-bundle-form input[name="selling_plan"]');t&&(e.classList.contains("lsg-bundle--sub-selected")||e.classList.contains("lsg-bundle--only-sub")?(e=e.querySelector(".lsg-bundle-interval-frequency-select:not(.is-duplicate)"),t.value=e?e.value:""):t.value="")}function inputChangeSubProduct(e){!isNaN(e.value)&&""!=e.value||(e.value=0),e.value>parseInt(e.max)&&(e.value=parseInt(e.max)),e.value<0&&(e.value=0),e.value<parseInt(e.min)&&(e.value=parseInt(e.min));var t=e.closest(".lsg-bundle-product-set-list").dataset.bundleMax,l=getBundleQuantity(e);t<l&&0<t&&(e.value>=(l=l-t)?e.value=e.value-l:e.closest(".lsg-bundle-product-set-list").querySelectorAll(".lsg-bundle-product-select-quantity-input").forEach(function(e){e.value=parseInt(e.min)})),updateQuantityDisplay(e),updateBundlePrice(e)}function incrementSubProduct(e){var t=e.classList.contains("lsg-bundle-product-select-quantity-minus")?"minus":e.classList.contains("lsg-bundle-product-select-quantity-plus")?"plus":"",l=e.closest(".lsg-bundle-product-select-quantity-wrap").querySelector(".lsg-bundle-product-select-quantity-input"),n=e.closest(".lsg-bundle-product-set-list").dataset.bundleMax,a=getBundleQuantity(e);switch(t){case"plus":l.value>=parseInt(l.max)?l.value=parseInt(l.max):(a<parseInt(n)||parseInt(n)<1)&&l.value++,updateBundlePrice(e);break;case"minus":l.value<=parseInt(l.min)?l.value=parseInt(l.min):l.value<=0?l.value=0:l.value--,updateBundlePrice(e)}updateQuantityDisplay(l),mirrorQuantityDisplay(l)}function mirrorQuantityDisplay(t){var e=getBundleBlock(t),l=t.dataset.product;const n=t.value;e.querySelectorAll('[data-product="'+l+'"].lsg-bundle-product-select-quantity-input').forEach(function(e){e!==t&&(e.value=n,inputChangeSubProduct(e))})}function updateQuantityDisplay(e){var t=e.closest(".lsg-bundle-product-select-quantity-wrap"),t=(e.value<=0?$(t).addClass("no-quantity"):$(t).removeClass("no-quantity"),e.parentNode.querySelector(".lsg-bundle-product-select-quantity-input-display"));t&&(t.innerHTML=e.value)}function updateBundlePrice(t){var t=getBundleBlock(t),e=t.querySelectorAll(".lsg-bundle-interval-otp-price"),l=t.querySelectorAll(".lsg-bundle-interval-sub-price"),n=t.querySelectorAll("[data-bundle-total]");const u=t.querySelector(".lsg-bundle-interval-frequency-select:not(.is-duplicate) option:checked"),s=t.querySelector(".lsg-bundle-product-set-list"),r=t.classList.contains("lsg-bundle--has-interval-select");var a=parseInt(t.dataset.productBasePrice);let c="",d=(t.classList.contains("lsg-bundle--only-otp")||t.classList.contains("lsg-bundle--otp-selected")?c="otp":(t.classList.contains("lsg-bundle--only-sub")||t.classList.contains("lsg-bundle--sub-selected"))&&(c="sub"),0),o=0;if(s&&"otp"==c&&s.querySelectorAll(".lsg-bundle-product-select-quantity-input").forEach(function(t){var l=parseInt(t.value),n=parseInt(t.dataset.price);if(d+=l*n,s&&u&&r){var t=u.dataset.discountType,a=u.dataset.discountValue;let e=0;switch(t){case"percentage":e=n*parseInt(a)/100;break;case"fixed_amount":e=parseInt(a);break;case"price":e=n-parseInt(a)}o+=l*(n-e)}}),s&&u&&"sub"==c){const p=u.dataset.discountType,g=u.dataset.discountValue;s.querySelectorAll(".lsg-bundle-product-select-quantity-input").forEach(function(e){var t=parseInt(e.value),l=parseInt(e.dataset.price);let n=0;switch(p){case"percentage":n=l*parseInt(g)/100;break;case"fixed_amount":n=parseInt(g);break;case"price":n=l-parseInt(g)}o+=t*(l-n),s&&r&&(d+=t*l)})}if(0<d&&(d+=a),0<o){var t=u.dataset.discountType,i=u.dataset.discountValue;let e=0;switch(t){case"percentage":e=a*parseInt(i)/100;break;case"fixed_amount":e=parseInt(i);break;case"price":e=a-parseInt(i)}e<0&&(e=0),o+=a-e}const b=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});e.forEach(function(e){e.innerHTML=b.format(d/100)}),l.forEach(function(e){e.innerHTML=b.format(o/100)}),n.forEach(function(e){"otp"==c?e.innerHTML=b.format(d/100):e.innerHTML=b.format(o/100)})}function initializeBundle(){document.querySelectorAll(".lsg-bundle-block").forEach(function(e){var t=e.querySelector(".lsg-bundle-interval-select"),l=e.querySelector(".lsg-bundle-interval-only-otp"),n=e.querySelector(".lsg-bundle-interval-only-sub"),a=e.querySelector('.lsg-bundle-form input[name="selling_plan"]'),u=e.querySelector(".lsg-bundle-interval-frequency-select:not(.is-duplicate)");if(t)switch(e.classList.add("lsg-bundle--has-interval-select"),t.querySelector('input[name^="bundle_interval_select_"]:checked').value){case"otp":e.classList.add("lsg-bundle--otp-selected"),a.value="";break;case"sub":e.classList.add("lsg-bundle--sub-selected"),a.value=u.value}else l?(e.classList.add("lsg-bundle--only-otp"),a.value=""):n&&(e.classList.add("lsg-bundle--only-sub"),a.value=u.value);e.querySelectorAll(".lsg-bundle-product-set-list").forEach(function(e){incrementEnableValidation(e.querySelector(".lsg-bundle-product-select-quantity-input"))}),checkoutEnableValidation(a),setTimeout(function(){e.classList.add("is-initialized")},500)}),checkParameter()}function getBundleQuantity(e){e=getBundleBlock(e);let t=-1;e=e.querySelector(".lsg-bundle-product-set-list");return e&&(t=0,e.querySelectorAll(".lsg-bundle-product-select-quantity-input").forEach(function(e){t+=parseInt(e.value)})),t}function getBundleQuantityByChild(e){e=e.closest(".lsg-bundle-product-set-list");let t=-1;return e&&(t=0,e.querySelectorAll(".lsg-bundle-product-select-quantity-input").forEach(function(e){t+=parseInt(e.value)})),t}function getBundleInterval(e){e=getBundleBlock(e);if(e.classList.contains("lsg-bundle--has-interval-select")){if(e.classList.contains("lsg-bundle--otp-selected"))return"otp";if(e.classList.contains("lsg-bundle--sub-selected"))return"sub"}return e.classList.contains("lsg-bundle--only-otp")?"otp":e.classList.contains("lsg-bundle--only-sub")?"sub":"err"}function getBundleBlock(e){return e.closest(".lsg-bundle-block")}function getGuid(){let l=(new Date).getTime(),n=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random();return 0<l?(t=(l+t)%16|0,l=Math.floor(l/16)):(t=(n+t)%16|0,n=Math.floor(n/16)),("x"==e?t:7&t|8).toString(16)})}document.addEventListener&&window.addEventListener("pageshow",function(e){!e.persisted&&"back_forward"!==performance.getEntriesByType("navigation")[0].type||document.querySelectorAll(".lsg-bundle-product-select-quantity-input").forEach(function(e){e.value=0,inputChangeSubProduct(e),incrementEnableValidation(e),checkoutEnableValidation(e)})},!1),document.querySelectorAll("[data-bundle-builder-selected-product-remove-button]").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var t=e.target.closest("[data-bundle-builder-selected-variant-id]"),t=(productSelectionButtonClicked=!0,productSelectionIndex=t.getAttribute("data-index"),t.getAttribute("data-bundle-builder-selected-variant-id"));getBundleBlock(e.currentTarget).querySelector(`[data-lsg-bundle-variant-select-id='${t}']`).querySelector(".lsg-bundle-product-select-quantity-minus").click()})}),document.querySelectorAll(".lsg-bundle-product-select-quantity-increment").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),incrementSubProduct(e.currentTarget),buildSelectedProductArray(e.currentTarget),incrementEnableValidation(e.currentTarget),checkoutEnableValidation(e.currentTarget),setUrl(e.currentTarget)})}),document.querySelectorAll(".lsg-bundle-product-select-quantity-input").forEach(function(e){e.addEventListener("change",function(e){inputChangeSubProduct(e.currentTarget),incrementEnableValidation(e.currentTarget),checkoutEnableValidation(e.currentTarget)})}),document.querySelectorAll('.lsg-bundle-interval-select input[name^="bundle_interval_select_"]').forEach(function(e){e.addEventListener("change",function(e){updateInterval(e.currentTarget),checkoutEnableValidation(e.currentTarget),setUrl(e.currentTarget)})}),document.querySelectorAll(".lsg-bundle-interval-frequency-select").forEach(function(e){e.addEventListener("change",function(e){e.currentTarget;updateFrequency(e.currentTarget),setUrl(e.currentTarget)})}),document.querySelectorAll("[data-lsg-bundle-atc]").forEach(e=>{e.addEventListener("click",function(e){var t,l;e.preventDefault(),e.currentTarget.classList.contains("disabled")?(t=(parseInt(document.body.style.getPropertyValue("--announcement-offset").replace("px",""))||0)+(parseInt(document.body.style.getPropertyValue("--header-offset").replace("px",""))||0),l=getBundleBlock(e.currentTarget),window.scrollTo({top:l.offsetTop-t,behavior:"smooth"})):addToCart(e.currentTarget)})}),document.querySelectorAll(".lsg-bundle-size-select-el").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),setActiveBundle(e.currentTarget)})}),initializeBundle();const bundleObserver=new IntersectionObserver(([e])=>{var t=e.target.closest(".lsg-bundle-block");t&&(t.classList.remove("summary-is-below"),t.classList.remove("summary-is-above"),t.classList.remove("summary-is-visible"),e.isIntersecting?t.classList.add("summary-is-visible"):0<e.boundingClientRect.top?t.classList.add("summary-is-below"):t.classList.add("summary-is-above"))}),buyboxes=document.querySelectorAll(".lsg-bundle-summary-block"),bottomObserver=(buyboxes.forEach(e=>{bundleObserver.observe(e)}),new IntersectionObserver(([e])=>{var t=document.querySelectorAll(".lsg-bundle-block");e.isIntersecting?t.forEach(e=>{e.classList.add("is-scroll-bottom")}):t.forEach(e=>{e.classList.remove("is-scroll-bottom")})},{threshold:1})),subFooter=document.querySelector(".io-sub-footer");subFooter&&bottomObserver.observe(subFooter);