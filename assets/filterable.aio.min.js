/*
Generated time: October 16, 2023 12:43
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
document.addEventListener("alpine:init",()=>{Alpine.data("ThemeSection_filterable",i=>({focusId:"",filterData:[],init(){initTeleport(this.$root),Alpine.store("modals").register("filters","leftDrawer"),Alpine.store("modals").register("sort","rightDrawer"),window.addEventListener("popstate",this.onHistoryChange.bind(this)),this._observeResultsMutations()},filterFormSubmit(e,t){this.focusId=e.target.id,t&&Alpine.store("modals").close(t);let r=e.target.form;"form"===e.target.tagName.toLowerCase()&&(r=e.target);t=new FormData(r),t=new URLSearchParams(t);t.delete("price_range"),this.renderPage(t.toString(),e)},clearAllFilters(e){Alpine.store("modals").close("filters"),this.renderPage(new URL(e.currentTarget.href).searchParams.toString())},renderPage(e,t,r=!0){document.getElementById("facets-results").classList.add("opacity-50");const s=window.location.pathname+`?section_id=${i}&`+e;var a=e=>e.url===s;this.filterData.some(a)?this.renderFromCache(a,t):this.renderFromFetch(s,t),r&&this.updateURLHash(e)},renderFromFetch(t,e){fetch(t).then(e=>e.text()).then(e=>{this.filterData=[...this.filterData,{html:e,url:t}],this.renderMarkup(e)})},renderFromCache(e,t){e=this.filterData.find(e).html;this.renderMarkup(e)},renderMarkup(e){e=(new DOMParser).parseFromString(e,"text/html");const t=e.getElementById("facets-filterable").innerHTML,r=document.getElementById("facets-filterable");t!==r.innerHTML?(r.closest(".shopify-section").dispatchEvent(new CustomEvent("shapes:section:willmutate",{bubbles:!0})),setTimeout(()=>{r.querySelectorAll("[x-teleport]").forEach(e=>{e.remove()}),r.innerHTML=t,this.$nextTick(()=>{initTeleport(r)})},300)):document.getElementById("facets-results").classList.remove("opacity-50");e=e.getElementById("facets-results-count").innerHTML,liveRegion(e),e=document.getElementById(this.focusId);e&&setTimeout(()=>{document.getElementById(this.focusId).focus()},50)},updateURLHash(e){history.pushState({searchParams:e},"",""+window.location.pathname+(e&&"?".concat(e)))},onHistoryChange(e){e=e.state.searchParams||"";this.renderPage(e,null,!1)},_observeResultsMutations(){var e=document.getElementById("facets-filterable");new MutationObserver((e,t)=>{e.forEach(e=>{"childList"===e.type&&e.target.closest(".shopify-section").dispatchEvent(new CustomEvent("shapes:section:hasmutated",{bubbles:!0}))})}).observe(e,{childList:!0,attributes:!1,subtree:!1})}}))});