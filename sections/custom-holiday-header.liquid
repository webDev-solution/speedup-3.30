{% comment %} {{ 'custom.scss.css' | asset_url | stylesheet_tag }} {% endcomment %}
{{ 'custom.css' | asset_url | stylesheet_tag }}
{% comment %}theme-check-disable TemplateLength{% endcomment %}
{%- liquid
  assign color_scheme = section.settings.color_scheme | default: 'primary'
  assign layout = section.settings.header_layout
  assign uppercase = settings.header_uppercase
  assign base_font_class = settings.header_font
  assign dropdown_bg = section.settings.dropdown_bg
  assign crop = section.settings.crop
  assign predictive_search_enabled = true
  assign counter = 0
  assign show_icons = section.settings.show_icons
  if section.settings.enable_overlay_on_homepage and template == 'index'
    assign enable_overlay = true
  endif
  if section.settings.enable_overlay_on_collection_pages and template contains 'collection' and template != 'list-collections'
    assign enable_overlay = true
  endif
  if section.settings.enable_overlay_on_product_pages and template contains 'product'
    assign enable_overlay = true
  endif

  assign has_feature_desktop_button = false
  if section.blocks.size > 1
    assign has_feature_desktop_button = true
  endif
  case dropdown_bg
    when 'card'
      assign dropdown_background = 'bg-scheme-card'
      assign dropdown_text = 'text-scheme-text'
    when 'text'
      assign dropdown_background = 'bg-scheme-text'
      assign dropdown_text = 'text-scheme-background'
    when 'accent'
      assign dropdown_background = 'bg-scheme-accent'
      assign dropdown_text = 'text-scheme-accent-overlay'
  endcase
  assign predictive_search_enabled = settings.predictive_search_enabled
-%}
{%- capture logo -%}
  {%- assign class = 'font-heading text-xl lg:text-3xl py-2.5' -%}
  {%- if template == 'index' -%}
    <h1 class="h1 font-heading {{ class }}">
  {%- else -%}
    <div class="h1 font-heading {{ class }}">
  {%- endif -%}
    {% if section.settings.logo != blank %}
      {% liquid
        if section.settings.overlay_logo != blank and enable_overlay
          assign logo = section.settings.overlay_logo
        else
          assign logo = section.settings.logo
        endif
      %}
      <a href="{{ routes.root_url }}" class="site-header__logo-link inline w-full">
        {% capture image_size %}{{ section.settings.logo_max_width | escape }}x{% endcapture %}
        {% capture image_size_2x %}{{ section.settings.logo_max_width | times: 2 }}x{% endcapture %}
        <div style="max-width: {{ section.settings.logo_max_width }}px;">
          <img src="{{ logo | image_url: width: image_size_2x }}" alt="{{ shop.name }}" width="{{ logo.width }}" height="{{ logo.height }}" loading="lazy">
        </div>
      </a>
    {% else %}
      <a href="{{ routes.root_url }}" class="block max-w-[12rem] sm:max-w-md lg:max-w-2xl xl:max-w-none break-words mx-auto">{{ shop.name }}</a>
    {% endif %}
  {%- if template == 'index' -%}
    </h1>
  {%- else -%}
    </div>
  {%- endif -%}
{%- endcapture -%}


{%- if has_feature_desktop_button %}
  {%- capture feature_desktop_link -%}
    {%- for block in section.blocks -%}
    {%- liquid
      if  block.settings.position
        assign feature_desktop_link_position = block.settings.position
      endif 
      assign hide_button_shadow = false
      if block.settings.hide_button_shadow
        assign hide_button_shadow = true
      endif
    -%}
    {% if block.type == "feature_desktop_link" and block.settings.button_link %}
    <a href="{{ block.settings.button_link }}" {% if block.settings.id != blank %}id="{{block.settings.id}}"{% endif %} class="push-btn push-btn--pop inline-block {% if block.settings.hide_button_shadow %}push-btn--no-shadow{% endif %}">
      <span class="custom_hd_btn push-btn-surface">{{ block.settings.button_label }}</span>
    </a>
    {% endif %}   
    {%- endfor -%}
  {%- endcapture -%}
{% endif %}

{%- liquid
  assign link_all = section.settings.show_all_navigation_links
  assign link_classes = base_font_class | append: ' px-2.5 flex items-center transition'
  assign secondary_link_classes = 'inline-block font-body px-5 py-1'
  assign tertiary_link_classes = 'inline-block font-body px-5 py-1 max-w-full break-words'
  if uppercase
    assign base_font_class = base_font_class | append: ' uppercase'
    assign link_classes = link_classes | append: ' uppercase'
    assign secondary_link_classes = secondary_link_classes | append: ' uppercase'
    assign tertiary_link_classes = tertiary_link_classes | append: ' uppercase'
  else
    assign base_font_class = base_font_class | append: ' normal-case'
    assign link_classes = link_classes | append: ' normal-case'
    assign tertiary_link_classes = tertiary_link_classes | append: ' normal-case'
  endif
  if show_icons
    assign icon_link_classes = base_font_class | append: ' px-2.5 py-1 h-full flex items-center'
  endif
  assign show_collection_images = section.settings.show_collection_images
  assign showcase_second_level_links = section.settings.showcase_second_level_links
  assign showcase_first_level_collections = section.settings.showcase_first_level_collections
-%}
{% capture navigation %}
  <nav role="navigation">
    <ul  x-ref="navigation" class="flex flex-wrap -mx-2.5 {% if layout contains 'navigation_left' %}justify-start{% else %}justify-center{% endif %} items-center text-base {% if uppercase %}uppercase{% endif %} ">
      {%- if has_feature_desktop_button and feature_desktop_link_position == 'first_item_in_navigation' %}
      <li class="inline-block no-js-focus-wrapper h-full flex items-center relative z-10 px-2.5">
        <div class="{% unless hide_button_shadow %}{% if settings.button_shadow_direction contains 'top' %}pt-button-shadow{% else %}pb-button-shadow{% endif %}{% endunless %}">
          {{ feature_desktop_link }}
        </div>
      </li>
      {%- endif -%}
      {% for link in linklists[section.settings.main_linklist].links %}
        <li class="inline-block no-js-focus-wrapper h-full">      
          {%- liquid
            assign is_feature_collection_link = false
            assign is_shop = false
            if link.links == blank and showcase_first_level_collections and link.type == 'collection_link'
              assign is_feature_collection_link = true
            endif
     
             assign link_flag = false
            for block in section.blocks            
              if link.title == block.settings.link_name
                assign link_flag = true
              endif
            endfor
          -%}
         
          {% if link.title == 'shop' or link.title == 'Shop' or link_flag or link.title == 'Boutique' %}
              {% render 'megamenu-header', block: blocks, link: link, link_flag: link_flag %}
          {% else %}
          {% if link.links != blank or is_feature_collection_link %}
            <button class="items-stretch h-full relative {{ link_classes }}"
              :class="{'{{ dropdown_text }}': menuOpen.menu{{ counter }} }"
              @click="openMenu({{ counter }})"
              x-bind:aria-expanded="menuOpen.menu{{ counter }}? true: 'false'"
              aria-controls="menu{{ counter }}">
              <span x-cloak :class="{'opacity-100': menuOpen.menu{{ counter }}, 'opacity-0': !menuOpen.menu{{ counter }}, 'h-screen  -translate-y-1/2': !navWrapped }" class="{{ dropdown_background }} absolute top-0 left-0 right-0 bottom-0  absolute top-0 left-0 right-0 bottom-0  z-0  pointer-events-none" ></span>
              <span class="flex h-full items-center relative {% if layout contains 'navigation_center' %}text-center{% else %}text-left{% endif %}">
                <span class="inline-block pr-1">{{ link.title }}</span>
                <span class="inline-block w-2 h-2 align-middle svg-scale mr-1 transform origin-center rotate transition duration-150 ml-1" :class="{'rotate-180': menuOpen.menu{{ counter }}}">{% render 'icon-chevron-down' %}</span>
              </span>
            </button>
            <div class="no-js-focus-container absolute left-0 bottom-0 w-full py-section-vertical-spacing px-section transform translate-y-[calc(100%-var(--drop-down-offset))] z-100 {% if layout contains 'navigation_center' %}text-center{% elsif layout contains 'navigation_right'%}text-right{% endif %} max-h-three-quarters-screen-height overflow-hidden overflow-y-auto {{ dropdown_background }}  {{ dropdown_text }}"
                  id="menu{{ counter }}"
                  x-cloak
                  x-show="menuOpen.menu{{ counter }}"
                  x-transition:enter="transition ease duration-200"
                  x-transition:enter-start="opacity-0"
                  x-transition:enter-end="opacity-100"
                  x-transition:leave="transition ease duration-00"
                  x-transition:leave-start="opacity-100"
                  x-transition:leave-end="opacity-0"
                  data-header-dropdown
                  @focusout="focusOut($event, 'menu{{ counter }}')"
                  @click.away.prevent="menuOpen.menu{{ counter }} = false">

              {%- liquid
                assign counter = counter | plus: 1
                assign have_feature_links = false
                assign all_feature_links = false
                assign feature_link_count = 0
                assign single_level_links = link.links | where: "levels", 0
                assign product_links = single_level_links | where: "type", "product_link"
                assign collection_links = single_level_links | where: "type", "collection_link"
                assign feature_link_count = product_links.size | plus: collection_links.size
                if feature_link_count > 0
                  assign have_feature_links = true
                endif
                if feature_link_count == link.links.size
                  assign all_feature_links = true
                endif
                assign list_class = 'flex items-top justify-start -mx-5'
                assign col_class = 'px-5'
                assign use_grid = false
                if link.levels > 1
                  assign use_grid = true
                endif
                if feature_link_count > 0 and showcase_second_level_links == true
                  assign use_grid = true
                endif
                if collection_links.size > 0 and show_collection_images
                  assign use_grid = true
                endif
                if use_grid
                  assign list_class = 'grid grid-cols-1 lg:grid-cols-12 lg:gap-10 grid-flow-row-dense'
                  assign col_class = 'lg:col-span-2'
                endif
              %}
              {%- unless is_feature_collection_link %}
              <ul class="{{ list_class }} {% if layout contains 'navigation_center' %}text-center{% else %}text-left{% endif %}">

                {% comment %}theme-check-enable LiquidTag{% endcomment %}
                {% for child_link in link.links %}
                  {% liquid
                    assign is_feature_link = false
                    if child_link.type == 'product_link' or child_link.type == 'collection_link' and child_link.levels == 0
                      assign is_feature_link = true
                    endif
                  %}
                  {%- unless is_feature_link and showcase_second_level_links -%}
                    <li class="{{ col_class }} -mt-2">
                      {% if child_link.links != blank %}
                        {%- if child_link.type == 'collection_link' and show_collection_images -%}
                          <div class="-mt-2">
                            {%- assign object = child_link.object -%}
                            {% render 'showcase-tile' with object: object, crop: crop %}
                          </div>
                        {%- endif -%}
                        <h2 class="py-1 mb-2">
                          {% if link_all %}<a {% if child_link.active %}aria-current="page"{% endif %} class="inline-block py-1" href="{{ child_link.url }}" {% if child_link.active %}aria-current="page"{% endif %}>{% endif %}
                          {{ child_link.title }}
                          {% if link_all %}</a>{% endif %}
                        </h2>
                        <ul class="-mx-5 font-body text-base ">
                          {% for grandchild_link in child_link.links %}
                            <li>
                              <a {% if grandchild_link.active %}aria-current="page"{% endif %} href="{{ grandchild_link.url }}" class="{{ tertiary_link_classes }}">
                                {{ grandchild_link.title }}
                              </a>
                            </li>
                          {% endfor %}
                        </ul>
                      {% else %}
                        {%- if child_link.type == 'collection_link' and show_collection_images -%}
                          {%- assign object = child_link.object -%}
                          {% render 'showcase-tile' with object: object, crop: crop %}
                        {%- else -%}
                          <a {% if child_link.active %}aria-current="page"{% endif %} href="{{ child_link.url }}" class="-mx-5 text-base {{ secondary_link_classes }}">
                            {{ child_link.title }}
                          </a>
                        {%- endif -%}
                      {% endif %}
                    </li>
                  {%- endunless -%}
                {% endfor %}

                {% comment %}theme-check-disable LiquidTag{% endcomment %}
                {%- if have_feature_links and showcase_second_level_links -%}
                  {% assign features_mod = feature_link_count | modulo: 2 %}
                  {% for child_link in link.links %}
                      {%- if child_link.type == 'product_link' or child_link.type == 'collection_link' and child_link.levels == 0 -%}
                        {% if features_mod == 0 %}
                          {% capture cycle_class %}{% cycle "lg:col-end-11", "lg:col-end-13" %}{% endcapture %}
                        {% else %}
                          {% capture cycle_class %}{% cycle "lg:col-end-13", "lg:col-end-11" %}{% endcapture %}
                        {% endif %}
                        <li class="lg:col-span-2 {% unless all_feature_links %}{{ cycle_class }}{% endunless %} -mt-2">
                          {%- assign object = child_link.object -%}
                          {% render 'showcase-tile' with object: object, crop: crop %}
                        </li>
                      {%- endif -%}
                  {% endfor %}
                {%- endif -%}
                {% comment %}theme-check-enable LiquidTag{% endcomment %}
              </ul>
              {% else %}
                {%- render 'desktop-nav-featured-collection-links', link: link, crop: crop -%}
              {% endunless %}
            </div>
          {% else %}
            <a {% if link.active %}aria-current="page"{% endif %} href="{{ link.url }}" class="{{ link_classes }}">
              {{ link.title }}
            </a>
          {% endif %}
{% endif %}

        </li>
      {% endfor %}
    </ul>
  </nav>
{% endcapture %}
{%- liquid
  assign search_resources = ''
  if settings.search_products
    assign search_resources = ' product'
  endif
  if settings.search_collections
    assign search_resources = search_resources | append: ' collection'
  endif
  if settings.search_articles
    assign search_resources = search_resources | append: ' article'
  endif
  if settings.search_pages
    assign search_resources = search_resources | append: ' page'
  endif
  assign search_resources = search_resources | strip | split: ' ' | join: ','
-%}
{% assign close_text = 'general.accessibility.close_modal' %}
{% if layout contains 'search' %}
  {% assign close_text = 'general.search.clear' %}
{% endif %}
{%- capture search_form -%}
  <form x-ref="searchForm" action="{{ routes.search_url }}" method="get" role="search" {% if predictive_search_enabled %} @submit="onFormSubmit"{% endif %}">
    <div class="relative">
      <input
        id="header-search"
        type="search"
        name="q"
        value=""
        class="header-search-input pl-9 py-2 placeholder:text-scheme-text font-secondary w-full border-0 shadow-none bg-transparent"
        placeholder="{{ 'general.search.placeholder' | t }}"
        {%- if predictive_search_enabled -%}
          aria-expanded="false"
          aria-owns="predictive-search-results-list"
          aria-controls="predictive-search-results-list"
          aria-autocomplete="list"
          autocorrect="off"
          autocomplete="off"
          autocapitalize="off"
          spellcheck="false"
          x-ref="input"
          x-model="rawQuery"
          @input.debounce.300="onChange"
          @focus="onFocus"
        {%- endif -%}
      >
      <label class="visually-hidden" for="header-search">{{ 'general.search.placeholder' | t }}</label>
      <input type="hidden" name="options[prefix]" value="last">
      {%- if predictive_search_enabled == false and settings.search_products or settings.search_articles or settings.search_pages -%}
        <input type="hidden" name="type" value="{% if settings.search_products %}product{% endif %}{% if settings.search_articles %},article{% endif %}{% if settings.search_pages %},page{% endif %}">
      {%- endif -%}
      <button class="absolute left-0 top-1/2 transform -translate-y-1/2 p-1" aria-label="{{ 'general.search.submit' | t }}">
        <span class="inline-block w-6 h-6">{% render 'icon-search' %}</span>
      </button>
      <button x-cloak  {% if predictive_search_enabled %}@click="close(true,true)"{% else %}@click="closeSearch()"{% endif %} class="block p-1 absolute right-0 top-1/2 transform -translate-y-1/2" type="button">
        <span class="visually-hidden">{{ close_text | t }}</span>
        <span class="inline-block w-6 h-6">{% render 'icon-close' %}</span>
      </button>
    </div>
    {%- if predictive_search_enabled -%}
    <div id="predictiveSearchResults" :class="{'opacity-0': !isOpen }" tabindex="-1" x-cloak class="bg-scheme-background text-scheme-text pb-5 lg:pb-10 px-section absolute  left-0 right-0 z-50 max-h-three-quarters-screen-height overflow-hidden overflow-y-auto">
      <template x-if="loading && !results">
        <div class="w-6 h-6 mx-auto" data-predictive-loading>
          <div class="loading"></div>
        </div>
      </template>
      <template x-if="isOpen">
        <div  x-ref="results">
        </div>
      </template>
    </div>
    <span class="predictive-search-status visually-hidden" role="status" aria-hidden="true"></span>
    {%- endif -%}
  </form>
{%- endcapture -%}
{% comment %}
  Mobile menu icon.
  This is mandatory on mobile. On desktop only appears if menu icon layout is selected.
  {% endcomment %}
{%- capture menu_icon -%}
<button
  class="{{ base_font_class }} js-enabled inline-block -m-1 p-1 {% unless layout contains 'menu_icon' %}lg:hidden{% endunless %}"
  type="button"
  x-bind:aria-expanded="$store.modals.menuDrawer.contents === 'nav'"
  @click="$store.modals.toggle('nav')"
  data-menu-drawer-toggle>

  <span class="{% if show_icons %}visually-hidden{% endif %}">{{ 'layout.navigation.menu' | t }}</span>
  {%- if show_icons -%}
  <span class="block icon">
    <span class="w-6 h-6 inline-block align-middle open">{% render 'icon-menu' %}</span>
    <span class="w-6 h-6 inline-block align-middle close">{% render 'icon-close' %}</span>
  </span>
  {%- endif -%}
</button>
<noscript>
  <div class="no-js-focus-wrapper">
    <button
      class="inline-block -m-1 p-1 {% unless layout contains 'menu_icon' %}lg:hidden{% endunless %}"
      type="button"
      data-menu-drawer-toggle>
      <span class="{% if show_icons %}visually-hidden{% endif %}">{{ 'layout.navigation.menu' | t }}</span>
      {%- if show_icons -%}
      <span class="block icon">
        <span class="w-6 h-6 inline-block align-middle">{% render 'icon-menu' %}</span>
      </span>
      {%- endif -%}
    </button>
    <div class="hidden no-js-focus-container absolute left-0 bottom-0 w-11/12 md:w-7/12 lg:w-5/12 py-section-vertical-spacing px-section transform translate-y-[calc(100%-var(--section-border-thickness))] z-100 {% if layout contains 'navigation_center' %}text-center{% elsif layout contains 'navigation_right'%}text-right{% endif %} max-h-three-quarters-screen-height overflow-hidden overflow-y-auto {{ dropdown_background }}  {{ dropdown_text }}">
      {%- render 'no-js-sidebar-nav' %}
    </div>
  </div>
</noscript>
<div x-data>
  <div>
    {% render 'sidebar-nav', section: section, base_font_class: 'font-main' %}
  </div>
</div>
{%- endcapture -%}

{%- capture cart_icon %}
  {%- if show_icons -%}
    <div class="relative my-auto align-middle">
      <span class="inline-block w-6 h-6 fill-current align-top">
        {%- if settings.cart_icon == 'cart' -%}
          {%- render 'icon-cart' -%}
        {%- else -%}
          {%- render 'icon-bag' -%}
        {%- endif -%}
        <span class="visually-hidden">{{ 'layout.cart.title' | t }} </span>
      </span>

      <span class="header__item-count tracking-normal absolute -bottom-1.5 -right-1.5 w-5 h-5 bg-scheme-text text-scheme-background rounded-full text-[0.625rem] flex items-center justify-center">{{ cart.item_count }}</span>

      <span class="visually-hidden">
        {%- if cart.item_count == 1 -%}
          {{- 'layout.cart.items_count.one' | t -}}
        {%- else -%}
          {{- 'layout.cart.items_count.other' | t -}}
        {%- endif -%}
      </span>
    </div>
  {%- else -%}
    {{ 'layout.cart.title' | t }} (<span  x-text="$store.cart_count.count">{{ cart.item_count }}</span>)
    <span class="visually-hidden">
      {%- if cart.item_count == 1 -%}
        {{- 'layout.cart.items_count.one' | t -}}
      {%- else -%}
        {{- 'layout.cart.items_count.other' | t -}}
      {%- endif -%}
    </span>
  {%- endif -%}
{%- endcapture -%}

{%- capture cart_button -%}
  {% if settings.cart_type == 'modal' and template != 'cart' %}
    <button
      class="js-enabled whitespace-nowrap {% if show_icons %}{{ icon_link_classes }}{% else %}{{ link_classes }}{% endif %}"
      type="button"
      id="CartButton"
      @click.prevent="$store.modals.open('cart')"
      >
      {{ cart_icon }}
    </button>
    <noscript>
      <a
        class="whitespace-nowrap {{ link_classes }}"
        href="{{ routes.cart_url }}"
      >
        {{ cart_icon }}
      </a>
    </noscript>
  {% else %}
    <a
      class="custom_cart_icon whitespace-nowrap {{ link_classes }}"
      href="{{ routes.cart_url }}"
    >
      Cart {{ cart_icon }}
    </a>
  {% endif %}
{%- endcapture -%}

{% comment %}
  Accounts
{% endcomment %}
{%- capture accounts -%}
  {% if shop.customer_accounts_enabled %}
    <a class="{% if show_icons %}{{ icon_link_classes }}{% else %}{{ link_classes }}{% endif %}" href="{% if request.locale.iso_code == 'fr' %}/fr{% endif %}/a/loop_subscriptions/customer">
      <span class="{% if show_icons %}visually-hidden{% endif %}">{{ 'layout.customer.log_in' | t }}</span>
      {%- if show_icons -%}
      <span class="inline-block w-6 h-6 align-middle">{%- render 'icon-account' -%}</span>
      {%- endif -%}
    </a>
  {% endif %}
{% endcapture %}

{% unless request.design_mode %}
  <script src="{{ 'header.aio.min.js' | asset_url }}" type="module"></script>
{% endunless %}
<script src="{{ 'cart-count.aio.min.js' | asset_url }}" type="module"></script>

<header
  class="
    site-header w-full text-scheme-text 
    {% if enable_overlay %}
      absolute top-0 left-0 right-0 z-20 border-b-section bg-transparent
      {% unless section.settings.overlay_show_separator_border %}
        border-transparent
      {% else %}
        border-border
      {% endunless %}
    {% else %}
      relative bg-scheme-background text-scheme-text border-b-section border-border
    {% endif %}
    transition-colors ease-in-out duration-200
    {% if layout contains 'navigation_center' %}
      lg:w-auto
    {% endif %}"
  role="banner"
  data-section-type="header"
  data-section-id="{{ section.id }}"
  data-color-scheme="{{ color_scheme }}" 
  x-data="ThemeSection_{{ section.id }}({{ counter }})"
  x-init="mounted()"
  {% if section.settings.sticky_header %}
    data-sticky-header
    :class="{ 'header-is-active' : menuIsActive }"
  {% else %}
    :class="{ 'header-is-active' : menuIsActive }"
  {% endif %}
>
  <div id="headerBorderWrap" class="headerBorderWrap">
    <div id="headerContainer"
          class="z-10">
      <div
        class="lg:py-0 px-section overflow-hidden">
        <div class="flex justify-between items-center">
          {% comment %} Left {% endcomment %}
          <div class="flex flex-grow {% unless layout contains 'search' %}w-1/3{% endunless %} {% if layout == 'logo_left_navigation_left' %}lg:w-2/3{% endif %} justify-start items-stretch">

            {% if layout contains 'logo_center' %}
              <div class="flex items-center z-10">{{ menu_icon }}</div>
            {% endif %}

            {% if layout contains 'logo_left' %}
              <div class="lg:flex-grow-1 {% if layout == 'logo_left_navigation_left' %}mr-5 lg:mr-10{% endif %}">
                {{ logo }}
              </div>
            {% endif %}
            {% if layout contains 'navigation_left' %}
              <div class="hidden lg:block">
                {{ navigation }}
              </div>
            {% endif %}
          </div>

          {% comment %} Center {% endcomment %}
          {% unless layout contains 'search' %}
            <div class="flex justify-center text-center {% if layout contains 'logo_center' %}flex-grow lg:flex-grow-0 lg:w-auto{% else %}w-0 flex-grow-0{% endif %} {% if layout contains 'navigation_center' %}lg:flex-grow {% unless has_feature_desktop_button and feature_desktop_link_position == 'right_of_cart' %}lg:w-3/4 xl:4/5{% else %}lg:w-1/3{% endunless %}{% endif %}">
              {% if layout contains 'logo_center' %}
                {{ logo }}
              {% endif %}
              {% if layout contains 'navigation_center' %}
                <div class="hidden lg:block">
                  {{ navigation }}
                </div>
              {% endif %}
            </div>
          {% endunless %}

          {% comment %} Right {% endcomment %}
          <div class="flex flex-grow w-1/3 items-center justify-end">

            {% if section.settings.label_text != blank %}
            <div class="take_our_quiz_btn" style="    margin-right: 10px;">
                <a href="{{ section.settings.label_link }}" class="btn">  {{ section.settings.label_text }}</a>
            </div>
              {% endif %}
            {% comment %}
            {% if layout contains 'logo_left' %}
              <div class="lg:hidden mr-5">
                {{ menu_icon }}
              </div>
            {% endif %}
            {% endcomment %}

            {% if layout contains 'navigation_right' %}
              <div class="block ml-5 mr-10">
                {{ navigation }}
              </div>
            {% endif %}

            {% if section.settings.enable_social_icons_header %}
              <div class="mr-10 block  ">
                {% render 'social-icons', position: 'header' %}
              </div>
            {% endif %}

            {% if has_feature_desktop_button and feature_desktop_link_position == 'left_of_cart' %}
            <div class="items-center relative z-10 hidden lg:flex py-2.5 ml-5">
              <div class="{% unless hide_button_shadow %}{% if settings.button_shadow_direction contains 'top' %}pt-button-shadow{% else %}pb-button-shadow{% endif %}{% endunless %}">
                {{ feature_desktop_link }}
              </div>
            </div>
            {% endif %}
            {% comment %}
            <div class="block h-full">
              {{ accounts }}
            </div>
            {% endcomment %}

            {% unless section.settings.header_show_search == false %}
              <a data-open-search x-ref="search" @click.prevent="openSearch()" @keydown.space="openSearch()" href="{{ routes.search_url }}" class="{% if show_icons %}{{ icon_link_classes }}{% else %}hidden lg:block {{ link_classes }}{% endif %}">
                {% if show_icons %}<span class="inline-block w-6 h-6 fill-current align-middle">{%- render 'icon-search' -%}</span>{% endif %}
                <span class="visually-hidden">{{ 'general.search.title' | t }}</span>{% unless show_icons %}<span>{{ 'general.search.submit' | t }}</span>{% endunless %}
              </a>
              <div
                class="absolute top-0 left-0 right-0 bottom-0 w-full flex items-center bg-scheme-background text-scheme-text z-20 px-section"
                x-cloak
                x-show="searchOpen"
                x-transition:enter="transition ease duration-200"
                x-transition:enter-start="opacity-0"
                x-transition:enter-end="opacity-100"
                x-transition:leave="transition ease duration-00"
                x-transition:leave-start="opacity-100"
                x-transition:leave-end="opacity-0"
                @click.away.prevent="searchOpen = false"
                data-header-search
                >
                <div class="w-full" {% if predictive_search_enabled %}x-data='ThemeComponent_PredictiveSearch({{ search_resources | json }})' x-init="mounted()" @focusOut="onFocusOut" @keyup="onKeyup" @keydown="onKeydown" {% endif %}>
                  {{ search_form }}
                </div>
              </div>
            {% endunless %}

            <div class="flex items-center justify-end {% unless has_feature_desktop_button and feature_desktop_link_position == 'right_of_cart' %} -mr-2.5 {% endunless %} h-full pr_15">
              {{ cart_button }}
            </div>

            {% if has_feature_desktop_button and feature_desktop_link_position == 'right_of_cart' %}
            <div class="items-center relative z-10 hidden lg:flex py-2.5 ml-5">
              <div class="{% unless hide_button_shadow %}{% if settings.button_shadow_direction contains 'top' %}pt-button-shadow{% else %}pb-button-shadow{% endif %}{% endunless %}">
                {{ feature_desktop_link }}
              </div>
            </div>
            {% endif %}
<!-- <span class="ly-custom-1024"></span> -->
      <div class="ds_drawer_country_selection btn ">
        <a  id="_lang-en"></a>
        <a  id="_lang-fr">FR</a>
      </div> 
      <script>
        $( document ).ready(function() {
            let currentURL = window.location.href;
          // console.log(currentURL);
          // console.log("include_fr = " + currentURL.includes("/fr"));
            if(currentURL.includes("/fr")){
              document.getElementById("_lang-en").classList.remove("hide");
              document.getElementById("_lang-fr").classList.remove("show");
              document.getElementById("_lang-fr").classList.add("hide");
              $("#_lang-en").text("EN");
              document.getElementById("_lang-en").classList.add("show");
              // console.log("fr, yes");
            }
            else{
              document.getElementById("_lang-en").classList.remove("show");
              document.getElementById("_lang-fr").classList.remove("hide");
              document.getElementById("_lang-en").classList.add("hide");
              $("#_lang-fr").text("FR")
              document.getElementById("_lang-fr").classList.add("show");
              // console.log("fr, no");
            }
        });        
        document.getElementById("_lang-en").addEventListener("click", function(){
          let currentURL = window.location.href; console.log("currentURL = " + currentURL);
          let url = new URL(currentURL);
          let domain = url.hostname;
          let path = url.pathname.replace('/fr', ''); 
          if(path == "") path = "/";
          // console.log("path = " + path);
          window.location.href = path;
        });
        document.getElementById("_lang-fr").addEventListener("click", function(){
          let currentURL = window.location.href;
          let url = new URL(currentURL);
          let domain = url.hostname;
          let path = url.pathname;
          window.location.href = "/fr"+path;
        });
        
      </script>                  
          </div>
        </div>
      </div>
    </div>
  </div>
  {% render 'menu-drawer' %}
</header>
<noscript>
  <style>
    .no-js-focus-wrapper:focus-within > .no-js-focus-container {
      display: block !important;
    }
  </style>
</noscript>

{% style %}
  {% if section.settings.sticky_header %}
  #shopify-section-header {
    position: sticky;
    top: 0;
    z-index: 40;
  }

  #HeaderBackdrop {
    position: absolute;
    width: 100%;
    top: var(--ab-height);
    height: var(--header-height);
    background: rgb(var(--color-{{ color_scheme }}-background));
  }
  {% endif %}
  {% if section.settings.logo != blank %}
  .logo-image {
    display: block;
    max-width: {{ section.settings.logo_max_width }}px;
  }
  {% endif %}
  {%- if enable_overlay -%}
  #MainContent .shopify-section:first-child > section:not(.full-bleed-section) {
    padding-top: {{ section.settings.overlay_first_section_padding_top_mobile }}rem;
  }

  @media (min-width: 990px) {
    #MainContent .shopify-section:first-child > section:not(.full-bleed-section) {
      padding-top: {{ section.settings.overlay_first_section_padding_top_desktop }}rem;
    }
  }
  {%- endif -%}
{% endstyle %}

<script>
  if (document.querySelector('#shopify-section-announcement-bar') != undefined) {
    window.addEventListener('scroll', function (evt) {
      var rect = document.querySelector('#shopify-section-announcement-bar').getBoundingClientRect();
      if (rect.top < -40) {
        document.body.classList.add('scroll-header')
      } else {
        document.body.classList.remove('scroll-header')
      }
    });
  } else {
    document.body.classList.add('scroll-header')
  }
 
    

</script>


{%- if predictive_search_enabled and request.design_mode == false -%}
  <script src="{{ 'modules-predictive-search.bundle.min.js' | asset_url }}" type="module"></script>
{%- endif -%}

{% comment %}theme-check-enable TemplateLength{% endcomment %}

{% schema %}
{
  "name": "Header",
  "class": "section-site-header relative z-40",
  "settings": [
    {
      "type": "header",
      "content": "Logo"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Custom logo",
      "info": "800 x 300px recommended."
    },
    {
      "type": "image_picker",
      "id": "mobile_mneu_logo",
      "label": "Mobile menu logo"
    },
    {
      "type": "range",
      "id": "logo_max_width",
      "min": 20,
      "max": 400,
      "step": 10,
      "unit": "px",
      "label": "Custom logo width",
      "default": 100
    },
    {
        "type":"text",
      "id":"label_text",
      "label":"Label"
    },
    {
        "type":"url",
      "id":"label_link",
      "label":"Link"
    },
    {
      "type": "header",
      "content": "Menu"
    },
    {
      "type": "link_list",
      "id": "main_linklist",
      "label": "Main menu",
      "default": "main-menu"
    },
    {
      "type": "link_list",
      "id": "mobile_menu",
      "label": "Mobile menu"
    },
    {
      "type": "checkbox",
      "id": "show_all_navigation_links",
      "label": "Enable links to drop-down link headings"
    },
    {
      "type": "checkbox",
      "id": "showcase_second_level_links",
      "label": "Showcase second-level links",
      "info": "Second-level links to products or collections will be showcased if they don't have any child links. [Learn more](https://help.switchthemes.co)"
    },
    {
      "type": "checkbox",
      "id": "showcase_first_level_collections",
      "label": "Showcase first-level collections",
      "info": "First-level links to collections with no child links will showcase products in a dropdown. Does not apply to drawer navigation. [Learn more](https://help.switchthemes.co/shapes/guides/feature-collections-in-navigation.html)"
    },
    {
      "type": "checkbox",
      "id": "show_collection_images",
      "label": "Show collection images",
      "info": "Does not apply to drawer navigation."
    },
    {
      "type": "select",
      "id": "crop",
      "label": "Crop feature link images",
      "options": [
        {
          "value": "",
          "label": "No crop"
        },
        {
          "value": "aspect-w-4 aspect-h-3",
          "label": "Landscape"
        },
        {
          "value": "aspect-w-1 aspect-h-1",
          "label": "Square"
        },
        {
          "value": "aspect-w-3 aspect-h-4",
          "label": "Portrait"
        }
      ],
      "default": "aspect-w-1 aspect-h-1"
    },
    {
      "type": "text",
      "id": "shop_all_txt",
      "label": "Shop all button text",
      "default": "Shop All"
    },
    {
      "type": "url",
      "id": "shop_all_link",
      "label": "Shop all button link"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "header_layout",
      "label": "Desktop layout",
      "options": [
        {
          "value": "menu_icon_logo_center",
          "label": "Menu icon left, logo center"
        },
        {
          "value": "navigation_left_logo_center",
          "label": "Navigation left, logo center"
        },
        {
          "value": "logo_left_navigation_center",
          "label": "Logo left, navigation center"
        }
      ],
      "default": "navigation_left_logo_center"
    },
    {
      "type": "checkbox",
      "id": "header_show_search",
      "label": "Show search"
    },
    {
      "type": "checkbox",
      "id": "sticky_header",
      "label": "Sticky header"
    },
    {
      "type": "checkbox",
      "id": "show_icons",
      "label": "Show icons"
    },
    {
      "type": "header",
      "content": "Overlay Settings"
    },
    {
      "type": "checkbox",
      "id": "enable_overlay_on_homepage",
      "label": "Overlay header over home page",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "enable_overlay_on_collection_pages",
      "label": "Overlay header over collection pages",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "enable_overlay_on_product_pages",
      "label": "Overlay header over product page",
      "default": false
    },
    {
      "type": "select",
      "id": "overlay_text_color",
      "label": "Overlay text color",
      "options": [
        {
          "value": "same_as_section",
          "label": "Same as section"
        },
        {
          "value": "white",
          "label": "White"
        },
        {
          "value": "black",
          "label": "Black"
        }
      ],
      "default": "white"
    },
    {
      "type": "image_picker",
      "id": "overlay_logo",
      "label": "Overlay logo image"
    },
    {
      "type": "checkbox",
      "id": "overlay_show_separator_border",
      "label": "Show separator border",
      "info": "Requires Show border between sections to be enabled in layout settings."
    },
    {
      "type": "header",
      "content": "Overlay compensation",
      "info": "Adjust the padding above the first section when overlay header is enabled."
    },
    {
      "type": "range",
      "id": "overlay_first_section_padding_top_desktop",
      "label": "Desktop padding",
      "min": 0,
      "max": 10,
      "step": 1,
      "unit": "rem",
      "default": 3
    },
    {
      "type": "range",
      "id": "overlay_first_section_padding_top_mobile",
      "label": "Mobile padding",
      "min": 0,
      "max": 10,
      "step": 1,
      "unit": "rem",
      "default": 3
    },
    {
      "type": "header",
      "content": "Color"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme"
    },
    {
      "type": "checkbox",
      "id": "use_gradient_background",
      "label": "Use gradient for background"
    },
    {
      "type": "select",
      "id": "dropdown_bg",
      "label": "Dropdown background color",
      "options": [
        {
          "value": "card",
          "label": "Card"
        },
        {
          "value": "text",
          "label": "Text"
        },
        {
          "value": "accent",
          "label": "Accent"
        }
      ],
      "default": "card"
    },
    {
      "type": "header",
      "content": "Sidebar menu"
    },
    {
      "type": "checkbox",
      "id": "sidebar_show_footer_menu",
      "label": "Show footer menu"
    },
    {
      "type": "checkbox",
      "id": "sidebar_show_social_icons",
      "label": "Show social icons"
    },
    {
      "type":"paragraph",
      "content":"=== Carousel block 1 ==="
    },
    {
      "type": "checkbox",
      "id": "carousel_enable_1",
      "label": "Show",
         "default": true
    },
    {
      "type": "image_picker",
      "id": "carousel_img_1",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "carousel_heading_1",
      "label": "Heading",
      "default": "Save up to 30% When you bundle!"
    },
    {
      "type": "text",
      "id": "carousel_btn_text_1",
      "label": "Button text",
      "default": "Create your bundle"
    },
      {
      "type": "url",
      "id": "carousel_btn_link_1",
      "label": "Button link"
    },
      {
      "type": "color",
      "id": "carousel_back_1",
      "label": "Background color",
  "default": "#dbe9f5"
    },
       {
      "type": "color",
      "id": "carousel_text_1",
      "label": "Heading color",
  "default": "#000000"
    },
    {
      "type": "color",
      "id": "carousel_back_border_1",
      "label": "Border color",
  "default": "#bedaf5"
    },
      {
    "type":"paragraph",
    "content":"=== Carousel block 2 ==="
  },
       {
      "type": "checkbox",
      "id": "carousel_enable_2",
      "label": "Show",
         "default": true
    },
  {
      "type": "image_picker",
      "id": "carousel_img_2",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "carousel_heading_2",
      "label": "Heading",
      "default": "Save up to 30% When you bundle!"
    },
    {
      "type": "text",
      "id": "carousel_btn_text_2",
      "label": "Button text",
      "default": "Create your bundle"
    },
      {
      "type": "url",
      "id": "carousel_btn_link_2",
      "label": "Button link"
    },
         {
      "type": "color",
      "id": "carousel_back_2",
      "label": "Background color",
  "default": "#dbe9f5"
    },
      {
      "type": "color",
      "id": "carousel_text_2",
      "label": "Heading color",
  "default": "#000000"
    },
    {
      "type": "color",
      "id": "carousel_back_border_2",
      "label": "Border color",
  "default": "#bedaf5"
    }
  ],
  "blocks": [
    {
      "type": "feature_desktop_link",
      "limit": 1,
      "name": "Feature desktop link",
      "settings": [
        {
          "type": "url",
          "id": "button_link",
          "label": "Link"
        },
        {
          "type": "text",
          "id": "id",
          "label": "ID"
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Label",
          "default": "Shop Now"
        },
        {
          "type": "radio",
          "id": "position",
          "label": "Position",
          "options": [
            {
              "value": "first_item_in_navigation",
              "label": "First item in navigation"
            },
            {
              "value": "right_of_cart",
              "label": "Right of cart"
            },
            {
              "value": "left_of_cart",
              "label": "Left of cart"
            }
          ],
          "default": "first_item_in_navigation"
        },
        {
          "type": "checkbox",
          "id": "hide_button_shadow",
          "label": "Hide button shadow"
        }
      ]
    },
    {
      "type": "mobile_menu",
      "name": "Mobile menu",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "header",
          "content": "badge"
        },
        {
          "type": "text",
          "id": "badge_label",
          "label": "Label"
        }
      ]
    },
    {
      "type": "shop_megamenu",
      "name": "Megamenu - Shop",
      "settings": [
          {
          "type": "collection",
          "id": "choose_collection",
          "label": "Choose collection"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Link"
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Label",
          "default": "Shop Now"
        }
      ]
    },
    {
      "type": "megamenu_layout_1",
      "name": "Megamenu - layout 1",
      "settings": [
        {
          "type": "text",
          "id": "link_name",
          "label": "Heading",
          "info":"Same as a menu name"
        },
        {
          "type": "header",
          "content":"Menu 1"
        },
        {
          "type": "text",
          "id": "lay_menu_1",
          "label": "Heading"
        },
        {
          "type": "image_picker",
          "id": "lay_menu_image_1",
          "label": "Image"
        },
        {
          "type": "url",
          "id": "lay_menu_link_1",
          "label": "Link"
        },
         {
          "type": "header",
          "content":"Menu 2"
        },
        {
          "type": "text",
          "id": "lay_menu_2",
          "label": "Heading"
        },
        {
          "type": "image_picker",
          "id": "lay_menu_image_2",
          "label": "Image"
        },
        {
          "type": "url",
          "id": "lay_menu_link_2",
          "label": "Link"
        },
         {
          "type": "header",
          "content":"Menu 3"
        },
        {
          "type": "text",
          "id": "lay_menu_3",
          "label": "Heading"
        },
        {
          "type": "image_picker",
          "id": "lay_menu_image_3",
          "label": "Image"
        },
        {
          "type": "url",
          "id": "lay_menu_link_3",
          "label": "Link"
        },
         {
          "type": "header",
          "content":"Menu 4"
        },
        {
          "type": "text",
          "id": "lay_menu_4",
          "label": "Heading"
        },
        {
          "type": "image_picker",
          "id": "lay_menu_image_4",
          "label": "Image"
        },
        {
          "type": "url",
          "id": "lay_menu_link_4",
          "label": "Link"
        }
      ]
    }
  ]
}
{% endschema %}

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": {{ shop.name | json }},
  {% if section.settings.logo %}
    {% assign image_size = section.settings.logo.width | append: 'x' %}
    "logo": {{ section.settings.logo | image_url: width: image_size | prepend: "https:" | json }},
  {% endif %}
  "sameAs": [
    {{ settings.social_facebook_url | json }},
    {{ settings.social_instagram_url | json }},
    {{ settings.social_twitter_url | json }},
    {{ settings.social_patreon_url | json }},
    {{ settings.social_pinterest_url | json }},
    {{ settings.social_soundcloud_url | json }},
    {{ settings.social_spotify_url | json }},
    {{ settings.social_bandcamp_url | json }},
    {{ settings.social_flickr_url | json }},
    {{ settings.social_vimeo_url | json }},
    {{ settings.social_apple_url | json }},
    {{ settings.social_lastfm_url | json }},
    {{ settings.social_youtube_url | json }},
    {{ settings.social_google_url | json }},
    {{ settings.social_tumblr_url | json }},
    {{ settings.social_triplej_url | json }},
    {{ settings.social_mixcloud_url | json }}
  ],
  "url": {{ shop.url | append: page.url | json }}
}
</script>

{% if request.page_type == 'index' %}
  {% assign potential_action_target = shop.url | append: routes.search_url | append: "?q={search_term_string}" %}
  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "WebSite",
      "name": {{ shop.name | json }},
      "potentialAction": {
        "@type": "SearchAction",
        "target": {{ potential_action_target | json }},
        "query-input": "required name=search_term_string"
      },
      "url": {{ shop.url | append: page.url | json }}
    }
  </script>
{% endif %}
